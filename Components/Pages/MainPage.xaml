<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="DevJournal.Components.Pages.MainPage"
             Title="Personal Journal"
             BackgroundColor="#ECF0F1">

    <ScrollView Padding="30">
        <VerticalStackLayout Spacing="20">

            <Label Text="Welcome to Your Personal Journal! ðŸ“”"
                   FontSize="32"
                   FontAttributes="Bold"
                   TextColor="#2C3E50"/>

            <Label Text="Start your journaling journey today!"
                   FontSize="18"
                   TextColor="#7F8C8D"/>

            <Button Text="Get Started - Write Today's Entry"
                    Clicked="OnTodayEntryClicked"
                    BackgroundColor="#2ECC71"
                    TextColor="White"
                    FontSize="18"
                    HeightRequest="60"/>

            <Button Text="View Calendar"
                    Clicked="OnCalendarClicked"
                    BackgroundColor="#3498DB"
                    TextColor="White"
                    FontSize="18"
                    HeightRequest="60"/>

            <Border BackgroundColor="White"
                    Padding="20"
                    Stroke="#BDC3C7"
                    StrokeThickness="1">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10"/>
                </Border.StrokeShape>

                <VerticalStackLayout Spacing="15">
                    <Label Text="Your Journal Statistics"
                           FontSize="20"
                           FontAttributes="Bold"/>

                    <Label x:Name="totalEntriesLabel"
                           Text="Total Entries: 0"
                           FontSize="16"/>

                    <Label x:Name="todayStatusLabel"
                           Text="â³ No entry for today yet"
                           FontSize="16"/>
                </VerticalStackLayout>
            </Border>

            <!-- Recent Entries Section -->
            <Label Text="Recent Entries"
                   FontSize="24"
                   FontAttributes="Bold"
                   TextColor="#2C3E50"
                   Margin="0,20,0,10"/>

            <CollectionView x:Name="recentEntriesCollection"
                            SelectionMode="Single"
                            SelectionChanged="OnEntrySelected">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border BackgroundColor="White"
                                Padding="15"
                                Margin="0,5"
                                Stroke="#BDC3C7"
                                StrokeThickness="1">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="8"/>
                            </Border.StrokeShape>

                            <Grid RowDefinitions="Auto,Auto,Auto"
                                    ColumnDefinitions="*,Auto">
                                <!-- Title -->
                                <Label Grid.Row="0"
                                        Grid.Column="0"
                                       Text="{Binding Title}"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="#2C3E50"/>

                                <!-- Date -->
                                <Label Grid.Row="0"
                                        Grid.Column="1"
                                       Text="{Binding EntryDate, StringFormat='{0:MMM dd}'}"
                                       FontSize="14"
                                       TextColor="#7F8C8D"
                                       VerticalOptions="Center"/>

                                <!-- Mood -->
                                <Label Grid.Row="1"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                       Text="{Binding PrimaryMood}"
                                       FontSize="14"
                                       TextColor="#3498DB"
                                       Margin="0,5,0,0"/>

                                <!-- Preview -->
                                <Label Grid.Row="2"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                       Text="{Binding Content}"
                                       FontSize="14"
                                       TextColor="#7F8C8D"
                                       MaxLines="2"
                                       LineBreakMode="TailTruncation"
                                       Margin="0,5,0,0"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>

                <CollectionView.EmptyView>
                    <ContentView>
                        <Label Text="No entries yet. Start writing!"
                               FontSize="16"
                               TextColor="#7F8C8D"
                               HorizontalOptions="Center"
                               Margin="0,20"/>
                    </ContentView>
                </CollectionView.EmptyView>
            </CollectionView>

            <Button Text="About"
                    Clicked="OnAboutClicked"
                    BackgroundColor="#95A5A6"
                    TextColor="White"
                    FontSize="16"
                    Margin="0,20,0,0"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>